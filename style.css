/* =========================
   Variables & Resets
   ========================= */
:root{
  --bg: #8c52ff;
  --card-w: 300px;
  --card-h: 250px;
  --card-gap: 280px;     /* horizontal spacing per step */
  --tilt: -10deg;        /* Y-rotation per step */
  --dot-size: 16px;
  --dot-gap: 12px;
  --stage-h: 340px;      /* stage height */
}

*{ box-sizing: border-box; }
html,body{ height:100%; }

body{
  background: var(--bg);
  margin:0;
  display:grid;
  grid-template-rows: 1fr 56px; /* extra space for dots row */
  grid-template-columns: 1fr;
  align-items:center;
  justify-items:center;
  font-family:'Poppins',sans-serif;
  padding:24px 0;
}

/* =========================
   Carousel Stage
   ========================= */
main#carousel{
  grid-row: 1 / 2;
  grid-column: 1 / -1;
  width: 100vw;
  max-width: 1100px;
  height: var(--stage-h);
  display:flex;
  align-items:center;
  justify-content:center;

  /* 3D */
  overflow:hidden;
  transform-style: preserve-3d;
  perspective: 700px;

  /* state (JS updates these) */
  --items: 4;      /* number of cards */
  --position: 1;   /* active position */

  /* for cursor parallax */
  pointer-events: auto;
  transition: transform .3s ease;
  will-change: transform;
}

/* subtle pulse when JS auto-centers */
main#carousel.js-centering { transition: transform .18s ease; }

/* =========================
   Cards
   ========================= */
div.item{
  position:absolute;
  width:var(--card-w);
  height:var(--card-h);
  padding:16px 14px 18px;
  border:3px solid rgba(0,0,0,0.85);
  border-radius:22px;
  background: radial-gradient(120% 120% at 50% 0%, #ffffff 0%, #f7f3ff 85%);
  text-align:center;
  box-shadow: 0 10px 24px rgba(0,0,0,0.18);

  /* math */
  --r: calc(var(--position) - var(--offset));
  --abs: max(calc(var(--r) * -1), var(--r));

  transform:
    rotateY(calc(var(--tilt) * var(--r)))
    translateX(calc(var(--card-gap) * var(--r)))
    scale(calc(1 - 0.08 * var(--abs))); /* center ~1, sides smaller */

  z-index: calc((var(--items) - var(--abs)));
  opacity: calc(1 - (0.18 * var(--abs)));
  filter: blur(calc(0.4px * var(--abs)));
  transition: transform .25s linear, z-index .25s linear, filter .25s linear, opacity .25s linear, box-shadow .25s ease;
}

/* lift + focus on hover (works with JS) */
div.item:hover{
  transform: translateY(-10px) scale(1.05) rotateY(0deg) !important;
  z-index: 10;
  box-shadow: 0 20px 35px rgba(0,0,0,0.25);
  opacity: 1;
  filter: none;
}

/* Per-card offsets (match your 4 items) */
div.item:nth-of-type(1){ --offset:1; }
div.item:nth-of-type(2){ --offset:2; }
div.item:nth-of-type(3){ --offset:3; }
div.item:nth-of-type(4){ --offset:4; }

/* =========================
   Card Content
   ========================= */
.item img{
  width:100px; height:100px;
  border-radius:50%;
  margin-top:8px;
  object-fit:cover;
}

.item h3{
  margin:8px 0 4px;
  color:#8c52ff;
  text-transform: capitalize;
  letter-spacing:.3px;
}

.item p{
  margin:0;
  padding:0 6px;
  font-size:.95rem;
  line-height:1.25rem;

  /* clamp long text */
  max-width:92%;
  margin-inline:auto;
  overflow:hidden;
  text-overflow:ellipsis;
  display:-webkit-box;
  -webkit-line-clamp:5;
  -webkit-box-orient:vertical;
  word-break: break-word;
  hyphens:auto;
}

/* preserve your specific headings too */
.skills,.Projects,.Experience,.Certificates{ color:#8c52ff; margin-bottom:6px; }

/* =========================
   Radio Dots (navigation)
   ========================= */
input[type="radio"]{
  appearance:none;
  -webkit-appearance:none;
  width:var(--dot-size);
  height:var(--dot-size);
  margin:0 var(--dot-gap);
  border:2px solid #ffffffcc;
  border-radius:50%;
  background: transparent;
  box-shadow: 0 0 0 2px #00000022 inset;
  cursor:pointer;
  transition: transform .15s ease, background .15s ease, border-color .15s ease, box-shadow .15s ease;
  grid-row: 2 / 3;
  justify-self:center;
}

input[type="radio"]:hover{ transform: scale(1.1); }

input[type="radio"]:checked{
  background:#fff;
  border-color:#fff;
  box-shadow: 0 0 0 2px #00000022 inset, 0 0 0 4px #ffffff55;
}

/* Center the four dots under the carousel */
input:nth-of-type(1),
input:nth-of-type(2),
input:nth-of-type(3),
input:nth-of-type(4){
  grid-column: 1 / -1;
}

/* Even spacing via translate (keeps them centered regardless of container) */
input:nth-of-type(1){ transform: translateX(-90px); }
input:nth-of-type(2){ transform: translateX(-30px); }
input:nth-of-type(3){ transform: translateX( 30px); }
input:nth-of-type(4){ transform: translateX( 90px); }

/* Tie dots -> position */
input:nth-of-type(1):checked ~ main#carousel{ --position:1; }
input:nth-of-type(2):checked ~ main#carousel{ --position:2; }
input:nth-of-type(3):checked ~ main#carousel{ --position:3; }
input:nth-of-type(4):checked ~ main#carousel{ --position:4; }

/* =========================
   Dot Tooltips (content from aria-label set by JS)
   ========================= */
input[type="radio"]{
  position:relative;
}
input[type="radio"]::after{
  content: attr(aria-label);
  position:absolute;
  left:50%;
  top: calc(100% + 8px);
  transform: translateX(-50%) translateY(6px);
  white-space:nowrap;
  font-size:.8rem;
  line-height:1;
  color:#fff;
  opacity:0;
  pointer-events:none;
  padding:6px 8px;
  border-radius:8px;
  background: rgba(0,0,0,0.35);
  transition: opacity .15s ease, transform .15s ease;
}
input[type="radio"]:hover::after,
input[type="radio"]:focus-visible::after{
  opacity:1;
  transform: translateX(-50%) translateY(0);
}

/* =========================
   Accessibility Focus
   ========================= */
input[type="radio"]:focus-visible{
  outline: 3px solid #fff;
  outline-offset: 3px;
}

/* =========================
   Responsive
   ========================= */
@media (max-width: 768px){
  :root{
    --card-w: 280px;
    --card-h: 235px;
    --card-gap: 240px;
    --tilt: -9deg;
    --stage-h: 320px;
  }
  input:nth-of-type(1){ transform: translateX(-72px); }
  input:nth-of-type(2){ transform: translateX(-24px); }
  input:nth-of-type(3){ transform: translateX( 24px); }
  input:nth-of-type(4){ transform: translateX( 72px); }
  .item p{ -webkit-line-clamp:4; }
}

@media (max-width: 480px){
  :root{
    --card-w: 260px;
    --card-h: 225px;
    --card-gap: 210px;
    --tilt: -8deg;
    --stage-h: 300px;
    --dot-size: 14px;
  }
  body{ padding:16px 0; }
  .item p{ -webkit-line-clamp:4; }
}

/* =========================
   Reduced Motion
   ========================= */
@media (prefers-reduced-motion: reduce){
  *{ transition:none !important; animation:none !important; }
  main#carousel{ perspective: none; transform:none !important; }
  div.item{ transform:none !important; filter:none !important; opacity:1 !important; }
}
